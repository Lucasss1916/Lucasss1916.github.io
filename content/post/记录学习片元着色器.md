---
title: 记录学习片元着色器
date: 2026-01-07T15:57:49+08:00
draft: false
tags:
  - unity
  - shader
categories:
  - unity
summary: 从0开始学习shader，学习片元着色器
featured_image: ""
lastmod: 2026-01-07T15:57:49+08:00
---
# 1. 从0开始学习shader
先从dot normalize length这三个参数开始，弄明白这三个到底是什么，怎么用
- ==length== ：向量长度
- ==normalize==：不考虑长度，获取向量方向
- ==dot==：两个方向是否对齐，有多对齐
# 2. 向量
```
//代表该向量在xyz轴上的坐标，通过这三个参数能确定该向量的长度，以及方向
float3 v=float3(1,2,3);
//计算该向量的长度，也就是从原点到该点的距离
float d =length(v);
```
## 2.1. 常见用途
1. 距离判断
```
float dist =length(worldPos - centerPos);
```
- 技能范围
- 光照衰减
- UI圆形遮罩

2.做球形效果
```
if (length(uv - 0.5) < 0.3)
```
# 3. dot(a,b) 判断方向是否一致
dot(a,b)的结果：
前提是 **a 和 b 都是单位向量**

| 值   | 意义    |
| --- | ----- |
| 1   | 完全同方向 |
| 0   | 垂直    |
| -1  | 完全反方向 |
```
// ====== 片元着色器 ======
half4 frag (Varyings i) : SV_Target
{
    // 把 UV 从 [0,1] 移到 [-0.5, 0.5]
    float2 uv = i.uv - 0.5
    // =========================
    // 1️⃣ length：距离（圆形）
    // =========================
    float dist = length(uv)
    // =========================
    // 2️⃣ normalize：方向
    // =========================
    float2 dir = normalize(uv)
    // =========================
    // 3️⃣ dot：方向对齐程度
    // =========================
    float dotValue = dot(dir, float2(1, 0);
    // 映射到 0~1，方便显示
    float value = dotValue * 0.5 + 0.5;
    // 用颜色直接“看”结果
    return half4(value, value, value, 1);
}
```
